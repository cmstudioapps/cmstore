<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes do Jogo - CM Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://websfctype.vercel.app/Websfctype/Websfctype-main-@version104.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Roboto', sans-serif; background-color: #004F5F; color: #FFFFFF; }
    
    .navbar {
      background-color: #003C4C;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 1000;
    }
    
    .back-button { 
      color: #FFFFFF; 
      text-decoration: none; 
      font-size: 1.2em;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .game-container {
      max-width: 800px;
      margin: 100px auto 30px;
      padding: 20px;
      background-color: #006373;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .game-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .game-icon-large {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      object-fit: cover;
      border: 3px solid #FFFFFF;
    }
    
    .game-title {
      font-size: 2em;
      margin-bottom: 5px;
    }
    
    .game-developer {
      font-size: 1.2em;
      color: #f0f0f0;
      margin-bottom: 10px;
    }
    
    .game-meta {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .game-meta-item {
      background-color: #004F5F;
      padding: 5px 10px;
      border-radius: 5px;
    }
    
    .game-section {
      margin-bottom: 20px;
    }
    
    .game-section-title {
      font-size: 1.4em;
      margin-bottom: 10px;
      border-bottom: 2px solid #004F5F;
      padding-bottom: 5px;
    }
    
    .game-description {
      line-height: 1.6;
      margin-bottom: 20px;
    }
    
    .video-container {
      position: relative;
      padding-bottom: 56.25%; /* Proporção 16:9 */
      height: 0;
      overflow: hidden;
      margin-bottom: 20px;
    }
    
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 5px;
    }
    
    .download-btn {
      display: block;
      width: 100%;
      padding: 15px;
      background-color: #FFA000;
      color: #FFFFFF;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
      border-radius: 5px;
      margin-top: 20px;
      transition: background 0.3s;
    }
    
    .download-btn:hover {
      background-color: #FF8F00;
    }
    
    @media (max-width: 768px) {
      .game-header {
        flex-direction: column;
        text-align: center;
      }
      
      .game-meta {
        justify-content: center;
      }
    }
  </style>

</head>
<body>
  <nav class="navbar">
    <a href="index.html" class="back-button">← Voltar</a>
    <h1>CM Store</h1>
    <button onclick="share()" style="border: none; background-color: transparent; color: white;"><i class="fa-solid fa-share"></i> Share</button>
    <div></div> <!-- Espaço vazio para alinhamento -->
  </nav>
  
  <div class="game-container" id="game-container">
    <!-- Conteúdo será preenchido pelo JavaScript -->
  </div>
  <script src="log.js"></script>
<script>
    // Obter ID do jogo da URL
    const urlParams = new URLSearchParams(window.location.search);
    const gameId = urlParams.get('id');
    
    // Referência ao banco de dados
    const db = firebase.database();
    const container = document.getElementById('game-container');
    
    // Função auxiliar para criar elementos com atributos
    function createElement(tag, attributes = {}, textContent = '') {
        const element = document.createElement(tag);
        for (const [key, value] of Object.entries(attributes)) {
            element.setAttribute(key, value);
        }
        if (textContent) element.textContent = textContent;
        return element;
    }
    
    // Carregar dados do jogo
    db.ref('jogos/' + gameId).once('value').then(snapshot => {
        const game = snapshot.val();
        
        if (!game) {
            showGameNotFound();
            return;
        }
        
        document.title = `${game.nome} - CM Store`;
        
        // Cabeçalho do jogo
        const gameHeader = createElement('div', { class: 'game-header' });
        
        const gameIcon = createElement('img', {
            class: 'game-icon-large',
            src: game.icone,
            alt: `Ícone do jogo ${game.nome}`
        });
        
        const headerContent = createElement('div');
        const gameTitle = createElement('h1', { class: 'game-title' }, game.nome);
        const gameDeveloper = createElement('p', { class: 'game-developer' }, `Desenvolvedor: ${game.dev || 'Desconhecido'}`);
        
        const gameMeta = createElement('div', { class: 'game-meta' });
        const genreMeta = createElement('span', { class: 'game-meta-item' }, game.genero);
        const versionMeta = createElement('span', { class: 'game-meta-item' }, `Versão: ${game.versao}`);
        const sizeMeta = createElement('span', { class: 'game-meta-item' }, game.tamanho || 'Tamanho não especificado');
        
        gameMeta.append(genreMeta, versionMeta, sizeMeta);
        headerContent.append(gameTitle, gameDeveloper, gameMeta);
        gameHeader.append(gameIcon, headerContent);
        
        // Seção de descrição
        const descriptionSection = createElement('div', { class: 'game-section' });
        const descTitle = createElement('h3', { class: 'game-section-title' }, 'Descrição');
        const descContent = createElement('p', { class: 'game-description' }, game.descricao);
        descriptionSection.append(descTitle, descContent);
        
        // Adicionar ao container principal
        container.append(gameHeader, descriptionSection);
        
        // Seção de vídeo (se existir)
        if (game.video) {
            const videoSection = createElement('div', { class: 'game-section' });
            const videoTitle = createElement('h3', { class: 'game-section-title' }, 'Vídeo do Jogo');
            
            const videoContainer = createElement('div', { class: 'video-container' });
            const videoIframe = createElement('iframe', {
                src: game.video,
                frameborder: '0',
                allow: 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture',
                allowfullscreen: ''
            });
            
            videoContainer.appendChild(videoIframe);
            videoSection.append(videoTitle, videoContainer);
            container.appendChild(videoSection);
        } else {
            const noVideo = createElement('p', { class: 'game-description' }, 'Este jogo não possui vídeo demonstrativo.');
            container.appendChild(noVideo);
        }
        
        // Botão de download
        const downloadBtn = createElement('a', {
            class: 'download-btn',
            href: game.link,
            target: '_blank'
        }, 'BAIXAR JOGO');
        container.appendChild(downloadBtn);
        
        // Seção de comentários
        const commentsSection = createElement('div', { class: 'game-section' });
        const commentsTitle = createElement('h3', { class: 'game-section-title' }, 'Comentários');
        const disqusThread = createElement('div', { id: 'disqus_thread' });
        
        commentsSection.append(commentsTitle, disqusThread);
        container.appendChild(commentsSection);
        
        // Carregar Disqus
        loadDisqus(gameId);
        
    }).catch(error => {
        console.error('Erro ao carregar dados do jogo:', error);
        showErrorLoading();
    });
    
    function loadDisqus(gameId) {
        window.disqus_config = function() {
            this.page.url = window.location.href;
            this.page.identifier = gameId;
        };
        
        const script = document.createElement('script');
        script.src = 'https://cm-store.disqus.com/embed.js';
        script.setAttribute('data-timestamp', +new Date());
        (document.head || document.body).appendChild(script);
    }
    
    function showGameNotFound() {
        container.innerHTML = '';
        
        const title = createElement('h2', {}, 'Jogo não encontrado');
        const message = createElement('p', {}, 'O jogo solicitado não foi encontrado em nossa base de dados.');
        const backBtn = createElement('a', {
            class: 'download-btn',
            href: 'index.html'
        }, 'Voltar para a loja');
        
        container.append(title, message, backBtn);
    }
    
    function showErrorLoading() {
        container.innerHTML = '';
        
        const title = createElement('h2', {}, 'Erro ao carregar');
        const message = createElement('p', {}, 'Ocorreu um erro ao carregar os dados do jogo.');
        const backBtn = createElement('a', {
            class: 'download-btn',
            href: 'index.html'
        }, 'Voltar para a loja');
        
        container.append(title, message, backBtn);
    }
    
    function share() {
      
      navigator.share({
        title: "CM Store!",
        text: window.location.href 
      })
      
    }
</script>
</body>
</html>